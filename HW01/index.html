<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

		<!-- Custom styles for this template -->
    	<link href="cover.css" rel="stylesheet">

    	<style type="text/css">
    		svg {
    			margin: auto;
    		}

    		.axisWhite line{
			  stroke: white;
			}

			.axisWhite path{
			  stroke: white;
			}

			.axisWhite text{
			  fill: white;
			}

			.container {
				max-width: 62.5em;
				/*line-height: 30px;*/
			}

			table {
				margin-top: 2.5em;
			} 

			body {
				height: 162%;
			}

			footer {
				padding-top: 3em;
			}

    	</style>

		<title>Stocks Visualization</title>

	</head>

	<body class="text-center">

	    <div class="container d-flex p-3 mx-auto flex-column">
			<header class="masthead mb-auto">
				<div class="inner">
					<h3 class="masthead-brand">Alphabet Inc. Stock Price</h3>
					<!--<nav class="nav nav-masthead justify-content-center">
						<a class="nav-link active" href="#">Home</a>
						<a class="nav-link" href="#">Features</a>
						<a class="nav-link" href="#">Contact</a>
					</nav>-->
				</div>
			</header>

			<div style="max-height: 1000px">
				<svg width="1000" height="600"></svg>	
			</div>

			<main role="main" class="inner cover">
				<p class="lead">Above line graph, displays the rise/decline
				 of stock price of Alphabet Inc. (GOOGL) for the period
				  of 19-Nov-2016 to 19-Dec-2016</p>
				<p class="lead">Data collected from 
					<a href="https://finance.google.com/finance/historical?q=GOOGL" class="btn btn-primary" role="button" aria-disabled="true">
						Google Finance
					</a>
					and
					<a href="https://www.nasdaq.com/screening/company-list.aspx" class="btn btn-primary" role="button" aria-disabled="true">
						Nasdaq
					</a>
				</p>

				<p class="lead">My dataset can be described by the below two tables namely Stock Price table with 17726722 records of 4974 stocks across 3 stock exchanges from the date 1991-12-16 to the date 2016-12-21 and table Public Company</p>
			</main>

			<div>
				<table class="table table-striped table-dark">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Ticker</th>
							<th scope="col">Date</th>
							<th scope="col">Closing Price</th>
							<th scope="col">Daily High Price</th>
							<th scope="col">Daily Low Price</th>
							<th scope="col">Opening Price</th>
							<th scope="col">Volume Traded</th>
							<th scope="col">Timestamp</th>
						</tr>
					</thead>

					<tbody>
						<tr>
							<th scope="row">1</th>
							<th>YHOO</th>
							<th>1996-04-12</th>
							<th>1.3757</th>
							<th>1.7926</th>
							<th>1.0214</th>
							<th>N/A</th>
							<th>8654400</th>
							<th>2016-12-14 01:24:14</th>
						</tr>
						<tr>
							<th scope="row">2</th>
							<th>YHOO</th>
							<th>1996-04-15</th>
							<th>1.3445</th>
							<th>1.5008</th>
							<th>1.2507</th>
							<th>N/A</th>
							<th>79179192</th>
							<th>2016-12-14 01:24:14</th>
						</tr>
						<tr>
							<th scope="row">3</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
						</tr>
					</tbody>
				</table>

				<table class="table table-striped table-dark">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Symbol</th>
							<th scope="col">Company Name</th>
							<th scope="col">Last Sale</th>
							<th scope="col">Market Capitalization</th>
							<th scope="col">Adr TSO</th>
							<th scope="col">IPO Year</th>
							<th scope="col">Sector</th>
							<th scope="col">Industry</th>
							<th scope="col">Stock Exchange</th>
						</tr>
					</thead>

					<tbody>
						<tr>
							<th scope="row">1</th>
							<th>GOOGL</th>
							<th>Alphabet Inc.</th>
							<th>1119.2</th>
							<th>777622522631.2</th>
							<th>N/A</th>
							<th>2004</th>
							<th>Technology</th>
							<th>Computer Software</th>
							<th>nasdaq</th>
						</tr>
						<tr>
							<th scope="row">2</th>
							<th>AAPL</th>
							<th>Apple Inc.</th>
							<th>160.5</th>
							<th>816472488000</th>
							<th>N/A</th>
							<th>1980</th>
							<th>Technology</th>
							<th>Computer Manufacturing</th>
							<th>nasdaq</th>
						</tr>
						<tr>
							<th scope="row">3</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
							<th>...</th>
						</tr>
					</tbody>
				</table>


			</div>
				
			<footer class="mastfoot mt-auto">
				<div class="inner">
					<p>Sarvesh Upadhyay | D3 Data Visualization</p>
				</div>

				<div class="inner">
					<p style="text-align: justify">Sarvesh Upadhyay is a Graduate Computer Science Student enrolled in Data Visualization and Exploration Class taught by Prof. Georges Grinstein. Sarvesh has previously worked with javascript and has a good amount of web development experience. Sarvesh hopes to learn various visualization techniques, especially that are interactive in nature. Sarvesh is also keen to learn how to visualize high dimensional data and the precomputation and tradeoffs one need to make to visualize such datasets.</p>
				</div>

			</footer>


		</div>

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
		<script src="https://d3js.org/d3.v4.min.js"></script>

		<script type="text/javascript">

			//https://developer.mozilla.org/en-US/docs/Web/SVG/Element/g
			var svg = d3.select("svg");
			
			var margin = {top: 20, right: 20, bottom: 30, left: 50};
			
			var width = svg.attr("width") - margin.left - margin.right;
			var height = svg.attr("height") - margin.top - margin.bottom;

			//https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform
			g = svg.append("g")
				.attr('transform', `translate(${margin.left}, ${margin.top})`);

			//https://github.com/d3/d3-time-format/blob/master/README.md#timeParse	
			var parseTime = d3.timeParse("%Y-%m-%d");

			//https://github.com/d3/d3-scale#time-scales
			//https://github.com/d3/d3-scale/blob/master/README.md#continuous_rangeRound
			var x = d3.scaleTime().rangeRound([0, width]);
			var y = d3.scaleLinear().rangeRound([height, 0]);

			var line = d3.line()
						.x(d => x(d.date))
						.y(d => y(d.close));

			const rowFn = d => {
				d.date = parseTime(d.date);
				d.close = +d.close;
				return d;
			};    

			d3.csv("googl_stocks_2016_nov_19_2016_dec_19.csv", rowFn, data => {
				x.domain(d3.extent(data, d => d.date));
				y.domain(d3.extent(data, d => d.close));

				//https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform
				g.append("g")
				.attr("transform", "translate(0," + height + ")")
				.attr("class", "axisWhite")  
				.call(d3.axisBottom(x));

				//text is also a svg element
				//https://www.w3schools.com/graphics/svg_text.asp
				//https://www.w3.org/TR/SVG/text.html#TextElement
				//https://www.w3.org/TR/SVG/text.html#TextAnchorProperty
				//https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform
				g.append("g")
				.attr("class", "axisWhite")
				.call(d3.axisLeft(y))
				.append("text")
				.attr("fill", "white")
				.attr("transform", "rotate(-90)")
				.attr("y", 6)
				.attr("dy", "0.71em")
				.attr("text-anchor", "end")
				.text("Stock Price ($)");

				//path is a svg element
				//https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths
				//https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d
				g.append("path")
				.datum(data)
				.attr("fill", "none")
				.attr("stroke", "steelblue")
				.attr("stroke-linejoin", "round")
				.attr("stroke-linecap", "round")
				.attr("stroke-width", 1.5)
				.attr("d", line);
			});
		</script>

	</body>
</html>